{"version":3,"sources":["index.tsx"],"names":["DEFAULT_TRANSITION","AnimatedSwitchView","containerRef","React","createRef","prevProps","prevState","navigation","state","prevActiveKey","routes","index","key","props","activeKey","current","animateNextTransition","navigationConfig","descriptor","descriptors","ChildComponent","getComponent","transition","transitionViewStyle","styles","container","screenProps","Component","createAnimatedSwitchNavigator","routeConfigMap","switchConfig","router","Navigator","StyleSheet","create","flex"],"mappings":"yuBAAA,oDACA,yCAUA,4CAKA,8D,0EAMA,GAAMA,CAAAA,kBAAkB,CACtB,oBAAC,iCAAD,CAAY,QAAZ,kDACE,oBAAC,iCAAD,CAAY,GAAZ,EAAgB,IAAI,CAAC,MAArB,CAA4B,UAAU,CAAE,GAAxC,CAA6C,aAAa,CAAC,QAA3D,iDADF,CAEE,oBAAC,iCAAD,CAAY,EAAZ,EAAe,IAAI,CAAC,MAApB,CAA2B,UAAU,CAAE,GAAvC,iDAFF,CADF,C,GAiBMC,CAAAA,kB,keACJC,Y,CAAeC,KAAK,CAACC,SAAN,E,yHAEIC,S,CAAkB,IACpBC,CAAAA,SADoB,CACND,SAAS,CAACE,UADJ,CAC3BC,KAD2B,CAEnC,GAAMC,CAAAA,aAAa,CAAGH,SAAS,CAACI,MAAV,CAAiBJ,SAAS,CAACK,KAA3B,EAAkCC,GAAxD,CAFmC,GAG3BJ,CAAAA,KAH2B,CAGjB,KAAKK,KAAL,CAAWN,UAHM,CAG3BC,KAH2B,CAInC,GAAMM,CAAAA,SAAS,CAAGN,KAAK,CAACE,MAAN,CAAaF,KAAK,CAACG,KAAnB,EAA0BC,GAA5C,CAEA,GAAIE,SAAS,GAAKL,aAAd,EAA+B,KAAKP,YAAL,CAAkBa,OAArD,CAA8D,CAC5D,KAAKb,YAAL,CAAkBa,OAAlB,CAA0BC,qBAA1B,GACD,CACF,C,uCAEQ,IACCC,CAAAA,gBADD,CACsB,KAAKJ,KAD3B,CACCI,gBADD,IAECT,CAAAA,KAFD,CAEW,KAAKK,KAAL,CAAWN,UAFtB,CAECC,KAFD,CAGP,GAAMM,CAAAA,SAAS,CAAGN,KAAK,CAACE,MAAN,CAAaF,KAAK,CAACG,KAAnB,EAA0BC,GAA5C,CACA,GAAMM,CAAAA,UAAU,CAAG,KAAKL,KAAL,CAAWM,WAAX,CAAuBL,SAAvB,CAAnB,CACA,GAAMM,CAAAA,cAAc,CAAGF,UAAU,CAACG,YAAX,EAAvB,CAEA,GAAMC,CAAAA,UAAU,CACbL,gBAAgB,EAAIA,gBAAgB,CAACK,UAAtC,EAAqDtB,kBADvD,CAEA,GAAMuB,CAAAA,mBAAmB,CACtBN,gBAAgB,EAAIA,gBAAgB,CAACM,mBAAtC,EAA8D,IADhE,CAGA,MACE,qBAAC,oCAAD,CAAe,IAAf,EACE,GAAG,CAAE,KAAKrB,YADZ,CAEE,UAAU,CAAEoB,UAFd,CAGE,KAAK,CAAE,CAACE,MAAM,CAACC,SAAR,CAAmBF,mBAAnB,CAHT,iDAKE,oBAAC,eAAD,EACE,SAAS,CAAEH,cADb,CAEE,UAAU,CAAEF,UAAU,CAACX,UAFzB,CAGE,WAAW,CAAE,KAAKM,KAAL,CAAWa,WAH1B,iDALF,CADF,CAaD,C,gCAvC8BvB,KAAK,CAACwB,S,EA+CxB,QAASC,CAAAA,6BAAT,CACbC,cADa,CAEbC,YAFa,CAKQ,CACrB,GAAMC,CAAAA,MAAM,CAAG,uBAAaF,cAAb,CAA6BC,YAA7B,CAAf,CACA,GAAME,CAAAA,SAAS,CAAG,0BAAgB/B,kBAAhB,CAAoC8B,MAApC,CAA4CD,YAA5C,CAAlB,CAEA,MAAOE,CAAAA,SAAP,CACD,CAED,GAAMR,CAAAA,MAAM,CAAGS,wBAAWC,MAAX,CAAkB,CAC/BT,SAAS,CAAE,CACTU,IAAI,CAAE,CADG,CADoB,CAAlB,CAAf","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, ViewStyle } from 'react-native';\nimport {\n  NavigationProp,\n  NavigationDescriptor,\n  NavigationState,\n  NavigationRouteConfigMap,\n  ScreenProps,\n  NavigationContainer,\n  SwitchNavigatorConfig,\n} from 'react-navigation';\nimport {\n  createNavigator,\n  SceneView,\n  SwitchRouter,\n} from '@react-navigation/core';\nimport {\n  TransitioningView,\n  Transitioning,\n  Transition,\n} from 'react-native-reanimated';\n\nconst DEFAULT_TRANSITION = (\n  <Transition.Together>\n    <Transition.Out type=\"fade\" durationMs={200} interpolation=\"easeIn\" />\n    <Transition.In type=\"fade\" durationMs={200} />\n  </Transition.Together>\n);\n\ninterface Props {\n  navigationConfig: {\n    transition?: React.ReactNode;\n    transitionViewStyle?: ViewStyle;\n  };\n  navigation: NavigationProp<NavigationState>;\n  descriptors: { [key: string]: NavigationDescriptor };\n  screenProps?: ScreenProps;\n}\n\nclass AnimatedSwitchView extends React.Component<Props, {}> {\n  containerRef = React.createRef<TransitioningView>();\n\n  componentDidUpdate(prevProps: Props) {\n    const { state: prevState } = prevProps.navigation;\n    const prevActiveKey = prevState.routes[prevState.index].key;\n    const { state } = this.props.navigation;\n    const activeKey = state.routes[state.index].key;\n\n    if (activeKey !== prevActiveKey && this.containerRef.current) {\n      this.containerRef.current.animateNextTransition();\n    }\n  }\n\n  render() {\n    const { navigationConfig } = this.props;\n    const { state } = this.props.navigation;\n    const activeKey = state.routes[state.index].key;\n    const descriptor = this.props.descriptors[activeKey];\n    const ChildComponent = descriptor.getComponent();\n\n    const transition =\n      (navigationConfig && navigationConfig.transition) || DEFAULT_TRANSITION;\n    const transitionViewStyle =\n      (navigationConfig && navigationConfig.transitionViewStyle) || null;\n\n    return (\n      <Transitioning.View\n        ref={this.containerRef}\n        transition={transition}\n        style={[styles.container, transitionViewStyle]}\n      >\n        <SceneView\n          component={ChildComponent}\n          navigation={descriptor.navigation}\n          screenProps={this.props.screenProps}\n        />\n      </Transitioning.View>\n    );\n  }\n}\n\nexport interface AnimatedSwitchNavigatorConfig extends SwitchNavigatorConfig {\n  transition?: React.ReactNode;\n  transitionViewStyle?: ViewStyle;\n}\n\nexport default function createAnimatedSwitchNavigator(\n  routeConfigMap: NavigationRouteConfigMap,\n  switchConfig: SwitchNavigatorConfig & {\n    transition?: React.ReactNode;\n  }\n): NavigationContainer {\n  const router = SwitchRouter(routeConfigMap, switchConfig);\n  const Navigator = createNavigator(AnimatedSwitchView, router, switchConfig);\n\n  return Navigator;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n});\n"]}